<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8">
    </head>
    <script>
        function computerPlay(){
            let n = Math.floor(Math.random() * (3)) + 1;
            let move = (n == 3) ? "Rock" : (n == 2) ? "Paper" : "Scissors";
            return move;
            }
        function normalize(move){
            let firstLetter = move.slice(0, 1);
            let capital = firstLetter.toUpperCase();
            let rest = move.slice(1);
            let lower = rest.toLowerCase();
            let selection = capital + lower;
            return selection;
        }
        let playerScore = 0;
        let opponentScore = 0;
        function game(){
            function rps(playerSelection, computerSelection){
                 if (playerSelection == "Rock") {
                     let result = (computerSelection == "Scissors") ? "You Win!" :
                              (computerSelection == "Paper") ? "You Lose." : "Tie";
                    return result;
                }
                if (playerSelection == "Scissors") {
                 let result = (computerSelection == "Paper") ? "You Win!" :
                                 (computerSelection == "Rock") ? "You Lose." : "Tie";
                return result;
                }
                if (playerSelection == "Paper") {
                 let result = (computerSelection == "Rock") ? "You Win!" :
                                 (computerSelection == "Scissors") ? "You Lose." : "Tie";
                return result;
                }
                return "You must select Rock, Paper, or Scissors.";
            }
            let choice = prompt("Select Rock, Paper, or Scissors");
            let opponentMove = computerPlay();
            let playerMove = normalize(choice);
            let result = rps(playerMove, opponentMove);
            
            if (result == "You Win!"){
                playerScore++;
            } else if (result == "You Lose.") {
                opponentScore++;
            }
            console.log("Your opponent chose " + opponentMove);
            console.log(result);
            console.log("Your score is: " + playerScore + " Your opponents score is " + opponentScore);
        }
        game();
        game();
        game();
        game();
        game();
    </script>
</html>